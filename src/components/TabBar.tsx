import { useLocation, useNavigate } from 'react-router-dom';

const HomeIcon = ({ className }: { className?: string }) => (
  <svg
    className={className}
    width='16'
    height='18'
    viewBox='0 0 16 18'
    fill='none'
    xmlns='http://www.w3.org/2000/svg'
  >
    <path d='M0 18V6L8 0L16 6V18H10V11H6V18H0Z' fill='currentColor' />
  </svg>
);

const MailIcon = ({ className }: { className?: string }) => (
  <svg
    className={className}
    width='20'
    height='20'
    viewBox='0 0 20 20'
    fill='none'
    xmlns='http://www.w3.org/2000/svg'
  >
    <path
      d='M2 20C1.45 20 0.979333 19.8043 0.588 19.413C0.196667 19.0217 0.000666667 18.5507 0 18V8C0 7.45 0.196 6.97933 0.588 6.588C0.98 6.19667 1.45067 6.00067 2 6H4V0H12V4H6V12H8V6H18C18.55 6 19.021 6.196 19.413 6.588C19.805 6.98 20.0007 7.45067 20 8V18C20 18.55 19.8043 19.021 19.413 19.413C19.0217 19.805 18.5507 20.0007 18 20H2Z'
      fill='currentColor'
    />
  </svg>
);
const FriendIcon = ({ className }: { className?: string }) => (
  <svg
    className={className}
    width='22'
    height='16'
    viewBox='0 0 22 16'
    fill='none'
    xmlns='http://www.w3.org/2000/svg'
  >
    <path
      d='M0 16V13.2C0 12.6334 0.146 12.1127 0.438 11.638C0.73 11.1634 1.11733 10.8007 1.6 10.55C2.63333 10.0334 3.68333 9.64603 4.75 9.38803C5.81667 9.13002 6.9 9.00069 8 9.00003C9.1 8.99936 10.1833 9.12869 11.25 9.38803C12.3167 9.64736 13.3667 10.0347 14.4 10.55C14.8833 10.8 15.271 11.1627 15.563 11.638C15.855 12.1134 16.0007 12.634 16 13.2V16H0ZM18 16V13C18 12.2667 17.796 11.5624 17.388 10.887C16.98 10.2117 16.4007 9.63269 15.65 9.15003C16.5 9.25003 17.3 9.42103 18.05 9.66303C18.8 9.90503 19.5 10.2007 20.15 10.55C20.75 10.8834 21.2083 11.254 21.525 11.662C21.8417 12.07 22 12.516 22 13V16H18ZM8 8.00003C6.9 8.00003 5.95833 7.60836 5.175 6.82503C4.39167 6.04169 4 5.10003 4 4.00003C4 2.90003 4.39167 1.95836 5.175 1.17503C5.95833 0.391692 6.9 2.56407e-05 8 2.56407e-05C9.1 2.56407e-05 10.0417 0.391692 10.825 1.17503C11.6083 1.95836 12 2.90003 12 4.00003C12 5.10003 11.6083 6.04169 10.825 6.82503C10.0417 7.60836 9.1 8.00003 8 8.00003ZM18 4.00003C18 5.10003 17.6083 6.04169 16.825 6.82503C16.0417 7.60836 15.1 8.00003 14 8.00003C13.8167 8.00003 13.5833 7.97936 13.3 7.93803C13.0167 7.89669 12.7833 7.85069 12.6 7.80003C13.05 7.26669 13.396 6.67503 13.638 6.02503C13.88 5.37503 14.0007 4.70003 14 4.00003C13.9993 3.30003 13.8787 2.62503 13.638 1.97503C13.3973 1.32503 13.0513 0.733359 12.6 0.200025C12.8333 0.116692 13.0667 0.0623592 13.3 0.0370258C13.5333 0.0116925 13.7667 -0.000641026 14 2.56407e-05C15.1 2.56407e-05 16.0417 0.391692 16.825 1.17503C17.6083 1.95836 18 2.90003 18 4.00003Z'
      fill='currentColor'
    />
  </svg>
);
const ReportIcon = ({ className }: { className?: string }) => (
  <svg
    className={className}
    width='18'
    height='18'
    viewBox='0 0 18 18'
    fill='none'
    xmlns='http://www.w3.org/2000/svg'
  >
    <path
      d='M3.5155 18C3.03216 18 2.60316 17.8417 2.2285 17.525C1.85383 17.2083 1.6245 16.8083 1.5405 16.325L0.0154959 7.175C-0.0345041 6.875 0.0364959 6.60433 0.228496 6.363C0.420496 6.12167 0.674496 6.00067 0.990496 6H16.6405C16.9572 6 17.2115 6.121 17.4035 6.363C17.5955 6.605 17.6662 6.87567 17.6155 7.175L16.0905 16.325C16.0072 16.8083 15.7782 17.2083 15.4035 17.525C15.0288 17.8417 14.5995 18 14.1155 18H3.5155ZM6.8155 12H10.8155C11.0988 12 11.3365 11.904 11.5285 11.712C11.7205 11.52 11.8162 11.2827 11.8155 11C11.8148 10.7173 11.7188 10.48 11.5275 10.288C11.3362 10.096 11.0988 10 10.8155 10H6.8155C6.53216 10 6.29483 10.096 6.1035 10.288C5.91216 10.48 5.81616 10.7173 5.8155 11C5.81483 11.2827 5.91083 11.5203 6.1035 11.713C6.29616 11.9057 6.5335 12.0013 6.8155 12ZM2.8155 5C2.53216 5 2.29483 4.904 2.1035 4.712C1.91216 4.52 1.81616 4.28267 1.8155 4C1.81483 3.71733 1.91083 3.48 2.1035 3.288C2.29616 3.096 2.5335 3 2.8155 3H14.8155C15.0988 3 15.3365 3.096 15.5285 3.288C15.7205 3.48 15.8162 3.71733 15.8155 4C15.8148 4.28267 15.7188 4.52033 15.5275 4.713C15.3362 4.90567 15.0988 5.00133 14.8155 5H2.8155ZM4.8155 2C4.53216 2 4.29483 1.904 4.1035 1.712C3.91216 1.52 3.81616 1.28267 3.8155 1C3.81483 0.717333 3.91083 0.48 4.1035 0.288C4.29616 0.0960001 4.5335 0 4.8155 0H12.8155C13.0988 0 13.3365 0.0960001 13.5285 0.288C13.7205 0.48 13.8162 0.717333 13.8155 1C13.8148 1.28267 13.7188 1.52033 13.5275 1.713C13.3362 1.90567 13.0988 2.00133 12.8155 2H4.8155Z'
      fill='currentColor'
    />
  </svg>
);
const SettingIcon = ({ className }: { className?: string }) => (
  <svg
    className={className}
    width='20'
    height='20'
    viewBox='0 0 20 20'
    fill='none'
    xmlns='http://www.w3.org/2000/svg'
  >
    <path
      d='M8.345 20C7.895 20 7.50767 19.85 7.183 
        19.55C6.85833 19.25 6.66233 18.8833 6.595 
        18.45L6.37 16.8C6.15333 16.7167 5.94933 16.6167 5.758 
        16.5C5.56667 16.3833 5.379 16.2583 5.195 16.125L3.645 16.775C3.22833 16.9583 
        2.81167 16.975 2.395 16.825C1.97833 16.675 1.65333 16.4083 1.42 16.025L0.245 13.975C0.0116665 
        13.5917 -0.055 13.1833 0.045 12.75C0.145 12.3167 0.37 11.9583 0.72 11.675L2.045 10.675C2.02833 10.5583 2.02 10.4457 
        2.02 10.337V9.662C2.02 9.554 2.02833 9.44167 2.045 9.325L0.72 8.325C0.37 8.04167 0.145 7.68333 0.045 7.25C-0.055 6.81667 
        0.0116665 6.40833 0.245 6.025L1.42 3.975C1.65333 3.59167 1.97833 3.325 2.395 3.175C2.81167 3.025 3.22833 3.04167 3.645 3.225L5.195 
        3.875C5.37833 3.74167 5.57 3.61667 5.77 3.5C5.97 3.38333 6.17 3.28333 6.37 3.2L6.595 1.55C6.66167 1.11667 6.85767 0.75 7.183 0.45C7.50833 0.15 
        7.89567 0 8.345 0H10.695C11.145 0 11.5327 0.15 11.858 0.45C12.1833 0.75 12.379 1.11667 12.445 1.55L12.67 3.2C12.8867 3.28333 13.091 3.38333 13.283 3.5C13.475 3.61667 13.6623 
        3.74167 13.845 3.875L15.395 3.225C15.8117 3.04167 16.2283 3.025 16.645 3.175C17.0617 3.325 17.3867 3.59167 17.62 3.975L18.795 6.025C19.0283 6.40833 19.095 6.81667 18.995 7.25C18.895 7.68333 
        18.67 8.04167 18.32 8.325L16.995 9.325C17.0117 9.44167 17.02 9.55433 17.02 9.663V10.337C17.02 10.4457 17.0033 10.5583 16.97 10.675L18.295 11.675C18.645 11.9583 18.87 12.3167 18.97 12.75C19.07 
        13.1833 19.0033 13.5917 18.77 13.975L17.57 16.025C17.3367 16.4083 17.0117 16.675 16.595 16.825C16.1783 16.975 15.7617 16.9583 15.345 16.775L13.845 16.125C13.6617 16.2583 13.47 16.3833 13.27 
        16.5C13.07 16.6167 12.87 16.7167 12.67 16.8L12.445 18.45C12.3783 18.8833 12.1827 19.25 11.858 19.55C11.5333 19.85 11.1457 20 10.695 20H8.345ZM9.57 13.5C10.5367 13.5 11.3617 13.1583 12.045 12.475C12.7283 
        11.7917 13.07 10.9667 13.07 10C13.07 9.03333 12.7283 8.20833 12.045 7.525C11.3617 6.84167 10.5367 6.5 9.57 6.5C8.58667 6.5 7.75733 6.84167 7.082 7.525C6.40667 8.20833 6.06933 9.03333 6.07 10C6.07067 10.9667 
        6.40833 11.7917 7.083 12.475C7.75767 13.1583 8.58667 13.5 9.57 13.5Z'
      fill='currentColor'
    />
  </svg>
);

const TabBar = () => {
  const navigate = useNavigate();
  const location = useLocation();

  const tabs = [
    { id: 'home', label: '홈', icon: HomeIcon, route: '/' },
    { id: 'mail', label: '편지함', icon: MailIcon, route: '/mail' },
    { id: 'friend', label: '친구', icon: FriendIcon, route: '/friend' },
    { id: 'report', label: '리포트', icon: ReportIcon, route: '/report' },
    { id: 'setting', label: '설정', icon: SettingIcon, route: '/setting' },
  ];

  return (
    <nav
      className='fixed bottom-0 left-0 right-0 mx-auto w-full max-w-[375px] 
    bg-[#FAFAFA] h-[85px] pt-[5px]

     border-t border-white shadow-[0_-4px_6px_-1px_rgba(0,0,0,0.08)] h-16 pb-safe'
    >
      <ul className='flex w-full h-full'>
        {tabs.map((tab) => {
          const isActive =
            tab.route === '/'
              ? location.pathname === '/' // 홈만 예외(모든 경로가 /로 시작해서)
              : location.pathname === tab.route || location.pathname.startsWith(`${tab.route}/`);

          const Icon = tab.icon;

          return (
            <li key={tab.id} className='flex-1 cursor-pointer'>
              <button
                type='button'
                onClick={() => navigate(tab.route)}
                className={`flex flex-col items-center justify-center w-full h-full gap-1.5 
                    ${isActive ? 'text-[#F5544C]' : 'text-[#97999B]'}`}
              >
                {/* Icon 컴포넌트 직접 사용 */}
                <Icon className='w-[22px] h-[22px]' />

                {/* 라벨 텍스트 */}
                <span className='text-[12px] font-medium'>{tab.label}</span>
              </button>
            </li>
          );
        })}
      </ul>
    </nav>
  );
};

export default TabBar;
